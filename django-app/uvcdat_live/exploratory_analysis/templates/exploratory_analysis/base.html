{% load staticfiles %}

<!DOCTYPE html PUBLIC"-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
	<meta content="utf-8" http-equiv="encoding">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    
    <link rel="shortcut icon" href="./ico/favicon.png">


    <title>UV-CDAT+ Prototype</title>

 	
	<!-- Bootstrap core CSS -->
	<link href="{% static 'exploratory_analysis/css/bootstrap/bootstrap.css' %}" rel="stylesheet" />
	
	<link href="{% static 'exploratory_analysis/css/sticky-footer-navbar.css' %}" rel="stylesheet" />
	<link href="{% static 'exploratory_analysis/css/navbar-fixed-top.css' %}" rel="stylesheet" />
	<link href="{% static 'exploratory_analysis/css/grid.css' %}" rel="stylesheet" />
	
	<link href="{% static 'exploratory_analysis/css/tree/style.css' %}" rel="stylesheet" />

    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-39778348-1']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
        
        
    </script>
    
    <style type="text/css">



		html {
			overflow-y: scroll;
		}
		
		.node circle {
		  cursor: pointer;
		  fill: #fff;
		  stroke: steelblue;
		  stroke-width: 1.5px;
		}
		
		.node text {
		  font-size: 11px;
		}
		
		path.link {
		  fill: none;
		  stroke: #ccc;
		  stroke-width: 1.5px;
		}

    </style>

</head>

<!--
{% if latest_poll_list %}
  <ul>
  {% for poll in latest_poll_list %}
    <li><a href="/polls/{{poll.id}}/">{{poll.question}}</a></li>
  {% endfor %}
  </ul>
{% else %}
  <p class="greentext">No polls are available.</p>
{% endif %}
-->
<body>

<!-- <div class="greentext">index.htm </div> -->

<!-- Wrap all page content here -->
    <div id="wrap">

<!-- Fixed navbar -->
		<div class="navbar navbar-inverse navbar-fixed-top">

			<div class="container">
          		<div class="navbar-header">
            		<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              		<span class="icon-bar"></span>
              		<span class="icon-bar"></span>
              		<span class="icon-bar"></span>
            		</button>
            		<a class="navbar-brand" href="#">UV-CDAT+</a>
          		</div>
          		
          		<div class="collapse navbar-collapse">

            		<ul class="nav navbar-nav">

	                	<li class="active"><a href="http://localhost:8081/exploratory_analysis">Home</a></li>
			                
			            <!--  
						<li class="dropdown">
	               			<a href="#" class="dropdown-toggle" data-toggle="dropdown">CLM Variables<b class="caret"></b></a>
	               			<ul class="dropdown-menu">
			                    <li><a href="all.html">All</a></li>
			                    <li class="menu" id="AR"><a href="#" >AR</a></li>
			                    <li class="menu" id="BTRAN"><a href="#">BTRAN</a></li>
			                    <li class="menu" id="CWDC"><a href="#">CWDC</a></li>
			                    <li class="menu" id="DEADCROOTC"><a href="#">DEADCROOTC</a></li>
			                    <li class="menu" id="DEADSTEMC"><a href="#">DEADSTEMC</a></li>
			                    <li class="menu" id="ER"><a href="#">ER</a></li>
			                    <li class="menu" id="FROOTC"><a href="#">FROOTC</a></li>
			                    <li class="menu" id="FSDS"><a href="#">FSDS</a></li>
			                    <li class="menu" id="GPP"><a href="#">GPP</a></li>
			                    <li class="menu" id="HR"><a href="#">HR</a></li>
			                    <li class="menu" id="LIVECROOTC"><a href="#">LIVECROOTC</a></li>
			                    <li class="menu" id="LIVESTEMC"><a href="#">LIVESTEMC</a></li>
			                    <li class="menu" id="NEE"><a href="#">NEE</a></li>
			                    <li class="menu" id="NPP"><a href="#">NPP</a></li>
			                    <li class="menu" id="PCO2"><a href="#">PCO2</a></li>
			                    <li class="menu" id="RAIN"><a href="#">RAIN</a></li>
			                    <li class="menu" id="TBOT"><a href="#">TBOT</a></li>
			                    <li class="menu" id="TLAI"><a href="#">TLAI</a></li>
			                    <li class="menu" id="TOTECOSYSC"><a href="#">TOTECOSYSC</a></li>
			                    <li class="menu" id="TOTLITC"><a href="#">TOTLITC</a></li>
			                    <li class="menu" id="TOTSOMC"><a href="#">TOTSOMC</a></li>
			                    <li class="menu" id="TOTVEGC"><a href="#">TOTVEGC</a></li>
			                    <li class="menu" id="WOODC"><a href="#">WOODC</a></li>
			                    
	               			</ul>
	               		</li>
						-->
						
						<li><a href="http://localhost:8081/exploratory_analysis/maps">Geo</a></li>
						<li><a href="http://localhost:8081/exploratory_analysis/tree">Diags Tree</a></li>
			            
            		</ul>


        		</div>

        	</div>

		</div>

		

		<div id="content">
        {% block content %}{% endblock %}
    	</div>


  	</div>


 
 <!--  
   	<div id="footer">
     	<div class="container">
         	<p class="text-muted credit"><a href="http://cda.ornl.gov/steed/personal/">Chad A.&nbspSteed</a>, Oak Ridge National Lab, Computational Sciences and Engineering Division.</p>
     	</div>
   	</div>
-->

	
	<script src="{% static 'exploratory_analysis/js/jquery/jquery-1.10.2.min.js' %}"></script>
	<script src="{% static 'exploratory_analysis/js/bootstrap/bootstrap.min.js' %}"></script>
	<script src="{% static 'exploratory_analysis/js/bootstrap/bootstrap-combobox.js' %}"></script>
	

	<script src="http://d3js.org/d3.v2.min.js?2.9.6"></script>
	<script type="text/javascript" src="{% static 'exploratory_analysis/js/geo/visualize.js' %}"></script>
	<script type="text/javascript" src="{% static 'exploratory_analysis/js/geo/map.js' %}"></script>
	<script type="text/javascript" src="{% static 'exploratory_analysis/js/geo/variablelist.js' %}"></script>
	<script type="text/javascript" src="{% static 'exploratory_analysis/js/geo/timelist.js' %}"></script>
	<script type="text/javascript" src="{% static 'exploratory_analysis/js/tree/tree.js' %}"></script>
	
    <!--<script type="text/javascript" src="d3.v3/d3.v3.js"></script>-->
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    
	
	<script type="text/javascript">
	
	
	$(document).ready(function(){
		
		var jsonData = '';
		var queryString = '';
		var url = 'datasets/' + 'jfharney';
		
		console.log('querying: ' + url);

		$.ajax({
			url: url,
			global: false,
			type: 'GET',
			dataType: 'json',
			data: queryString,
			success: function(data) {
				
				var datasetList = data['datasets'];
				$('#dataset_name').empty();
				for (var i=0;i<datasetList.length;i++) {
					var dataset = datasetList[i];
					$('.dropdown-dataset-menu').append('<li class="dataset_menu" id="' + dataset + '"><a href="#">' + dataset + '</a></li>');
				}
				
			},
			error: function( jqXHR, textStatus, errorThrown ) {
				alert('datasetList textStatus: ' + textStatus + ' errorThrown: ' + errorThrown);
				
			}
		});
		
		
		
		
		
		
		
		
		$('.dropdown-time-menu').on('click','a',function() {


			$('#time_name').empty();
			$('#time_name').append(this.innerHTML);
		
		});
		
		

		$('li.menu').on('click', function() {
			var jsonData = '';
			var queryString = '';
			var $input = $( this );
			var variable = $input.attr("id");
	
			var url = 'visualizations?variable=' + variable;
			
			$.ajax({
				url: url,
				global: false,
				type: 'GET',
				dataType: 'json',
				data: queryString,
				success: function(data) {
					
					//console.log('data: ' + data);
					$('.page-header').empty();
					$('.lead').empty();
					$('#map-canvas').empty();
					
					create_map_canvas(data, "#map-canvas", 720, 360);
					
					$('.page-header').append('<h3>' + variable  + 'Average Map</h3>');
					$('#map-canvas').append('<div>Data for: ' + variable + '</div>');
					//$('#map-canvas').append('<div>' + data + '</div>');
					
					
				},
				error: function( jqXHR, textStatus, errorThrown ) {
					alert('visualizations textStatus: ' + textStatus + ' errorThrown: ' + errorThrown);
					
				}
			});
		});
	
		
		
		
		
		

});


	</script>


</body>


</html>


